{% extends "base.html" %}
{% block content %}
<div class="container mt-5">
    <h3>You chose:</h3>
    <p>Location: {{ location }}</p>
    <p>Cost: {{ price }}</p>
    <p>Cuisine: {{ cuisine }}</p>
    <form action="{{ url_for('choose_location') }}" method="post">
        <div class="form-group">
            <label for="restaurant">Now, choose your favourite!</label>
            <div class="row">
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="{{ url_for('static', filename=images[0][0]) }}" class="card-img-top" alt="Restaurant Image" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Restaurant {{ images[0][2] }} ({{ images[0][1] }} stars)</h5>
                            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restaurantModal1">
                                View Details
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="{{ url_for('static', filename=images[1][0]) }}" class="card-img-top" alt="Restaurant Image" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Restaurant {{ images[1][2] }} ({{ images[1][1] }} stars)</h5>
                            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restaurantModal2">
                                View Details
                            </button>
                        </div>
                    </div>
                </div>
                <div class="col-md-4">
                    <div class="card mb-4 shadow-sm">
                        <img src="{{ url_for('static', filename=images[2][0]) }}" class="card-img-top" alt="Restaurant Image" style="height: 200px; object-fit: cover;">
                        <div class="card-body">
                            <h5 class="card-title">Restaurant {{ images[2][2] }} ({{ images[2][1] }} stars)</h5>
                            <button type="button" class="btn btn-outline-primary" data-bs-toggle="modal" data-bs-target="#restaurantModal3">
                                View Details
                            </button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <input type="hidden" name="restaurant" id="selectedRestaurant">
    </form>
    <a href="{{ url_for('feeling') }}" class="btn btn-secondary mt-3">Back</a>
</div>

<!-- Modal 1 -->
<div class="modal fade" id="restaurantModal1" tabindex="-1" aria-labelledby="restaurantModalLabel1" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="restaurantModalLabel1">Restaurant {{ images[0][2] }} Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img src="{{ url_for('static', filename=images[0][0]) }}" alt="Restaurant {{ images[0][2] }}" class="img-fluid">
                <p>Some details about Restaurant {{ images[0][2] }}...</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal3')">&#x2190; Previous</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal2')">Next &#x2192;</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="submitForm('Restaurant {{ images[0][2] }}')">Looks delicious!</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal 2 -->
<div class="modal fade" id="restaurantModal2" tabindex="-1" aria-labelledby="restaurantModalLabel2" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="restaurantModalLabel2">Restaurant {{ images[1][2] }} Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img src="{{ url_for('static', filename=images[1][0]) }}" alt="Restaurant {{ images[1][2] }}" class="img-fluid">
                <p>Some details about Restaurant {{ images[1][2] }}...</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal1')">&#x2190; Previous</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal3')">Next &#x2192;</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="submitForm('Restaurant {{ images[1][2] }}')">Looks delicious!</button>
            </div>
        </div>
    </div>
</div>

<!-- Modal 3 -->
<div class="modal fade" id="restaurantModal3" tabindex="-1" aria-labelledby="restaurantModalLabel3" aria-hidden="true">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header">
                <h5 class="modal-title" id="restaurantModalLabel3">Restaurant {{ images[2][2] }} Details</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
                <img src="{{ url_for('static', filename=images[2][0]) }}" alt="Restaurant {{ images[2][2] }}" class="img-fluid">
                <p>Some details about Restaurant {{ images[2][2] }}...</p>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal2')">&#x2190; Previous</button>
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal" onclick="openModal('#restaurantModal1')">Next &#x2192;</button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal" onclick="submitForm('Restaurant {{ images[2][2] }}')">Looks delicious!</button>
            </div>
        </div>
    </div>
</div>

<script>
function submitForm(restaurant) {
    var form = document.createElement('form');
    form.method = 'POST';
    form.action = '{{ url_for("choose_location") }}';
    var input = document.createElement('input');
    input.type = 'hidden';
    input.name = 'restaurant';
    input.value = restaurant;
    form.appendChild(input);
    document.body.appendChild(form);
    form.submit();
}

function openModal(modalId) {
    var modal = new bootstrap.Modal(document.querySelector(modalId));
    modal.show();
}
</script>
{% endblock %}
