{% extends "base.html" %}
{% block content %}
<h1 class="text-center">Feeling Preferences for Group: {{ session.get('group') }}</h1>
<form action="{{ url_for('feeling') }}" method="post" class="mt-5">
    <div class="text-center">
        <img src="{{ url_for('static', filename='eateasy-icon.png') }}" alt="EatEasy Logo" width="100" height="100">
    </div>
    <h3 class="text-center">What are you feeling like today?</h3>
    <p class="text-center">Top choices near you include...</p>
    <div class="d-flex justify-content-center flex-wrap">
        {% for cuisine in cuisines %}
        <button type="button" class="btn btn-outline-primary mx-2 feeling-option" data-value="{{ cuisine }}">{{ cuisine | capitalize }}</button>
        {% endfor %}
    </div>
    <div class="text-center mt-4">
        <p>Want something else?</p>
        <input type="text" class="form-control w-50 mx-auto" name="other_choice" id="other_choice">
    </div>
    <h3 class="text-center mt-4">How much would you like to spend?</h3>
    <div class="d-flex justify-content-center">
        <button type="button" class="btn btn-outline-primary mx-2 price-option" data-value="¥">¥</button>
        <button type="button" class="btn btn-outline-primary mx-2 price-option" data-value="¥¥">¥¥</button>
        <button type="button" class="btn btn-outline-primary mx-2 price-option" data-value="¥¥¥">¥¥¥</button>
    </div>
    <div class="text-center mt-4">
        <h4>Enter search radius (meters):</h4>
        <input type="number" class="form-control w-25 mx-auto" name="radius" id="radius" required>
    </div>
    <div class="text-center mt-4">
        <h4>Ready to discover your next meal?</h4>
        <button type="submit" class="btn btn-danger">I'm feeling hungry!</button>
    </div>
    <input type="hidden" name="feeling" id="feeling">
    <input type="hidden" name="price" id="price">
</form>

<script>
document.addEventListener('DOMContentLoaded', function() {
    const feelingOptions = document.querySelectorAll('.feeling-option');
    const priceOptions = document.querySelectorAll('.price-option');
    const feelingInput = document.getElementById('feeling');
    const priceInput = document.getElementById('price');

    feelingOptions.forEach(option => {
        option.addEventListener('click', function() {
            feelingOptions.forEach(btn => btn.classList.remove('active'));
            option.classList.add('active');
            feelingInput.value = option.getAttribute('data-value');
        });
    });

    priceOptions.forEach(option => {
        option.addEventListener('click', function() {
            priceOptions.forEach(btn => btn.classList.remove('active'));
            option.classList.add('active');
            priceInput.value = option.getAttribute('data-value');
        });
    });
});
</script>
{% endblock %}
